<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¥Ø¯Ø®Ø§Ù„ ÙØ¹Ø§Ù„ÙŠØ©</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}
.container {
    background: white;
    width: 95%;
    max-width: 500px;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}
h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #1e3c72;
}
label {
    font-weight: bold;
    display: block;
    margin-top: 15px;
    margin-bottom: 5px;
}
select, input, textarea {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
}
textarea {
    resize: none;
}
button {
    margin-top: 20px;
    width: 100%;
    padding: 12px;
    background: #1e3c72;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
}
button:hover {
    background: #16325c;
}
</style>
</head>

<body>

<div class="container">
<h2>Ø¥Ø¯Ø®Ø§Ù„ ÙØ¹Ø§Ù„ÙŠØ© Ù…Ø¯Ø±Ø³ÙŠØ©</h2>

<label>Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</label>
<select id="school">
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙŠØ¯Ø©</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø¥Ù…Ø·ÙŠ</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£Ø²Ù‡Ø± Ø¨Ù† Ù…Ø­Ù…Ø¯</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø¥Ø²ÙƒÙŠ</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ø£ÙŠÙ…Ù†</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¬Ø¹ÙØ±</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ø§Ù„Ø®ÙŠØ±</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ù…Ø±ØªÙØ¹Ø§Øª Ø¥Ø²ÙƒÙŠ</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø·ÙˆÙ‚</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù‚Ù„Ø¹Ø©</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¨ÙˆØ§Ø±Ù‚</option>
<option>Ù…Ø¯Ø±Ø³Ø© ØµØ±Ø­ Ø§Ù„Ù…Ø¹Ø±ÙØ©</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ù„Ø¨ÙŠØ¯ Ø¨Ù† Ø±Ø¨ÙŠØ¹Ø©</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø´ÙŠØ® Ø´Ø§Ù…Ø³</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù‚Ø±ÙŠØªÙŠÙ†</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙØ¶Ù„ Ø¨Ù† Ø§Ù„Ø­ÙˆØ§Ø±ÙŠ</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø«Ø±ÙŠØ§</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø³ÙŠÙ…Ø§ ÙˆÙ…Ù‚Ø²Ø­</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ø£ÙˆØ³ Ø¨Ù† Ø«Ø§Ø¨Øª</option>
<option>Ù…Ø¯Ø±Ø³Ø© Ù…Ø¯Ø±Ø¹Ø§Øª Ø³Ù„Ø·Ø§Ù† Ø¹Ù…Ø§Ù†</option>
</select>

<label>Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©</label>
<select id="type">
<option>Ø·Ø§Ø¨ÙˆØ±</option>
<option>Ø­Ù„Ù‚Ø© Ù†Ù‚Ø§Ø´</option>
<option>Ù…Ø­Ø§Ø¶Ø±Ø©</option>
<option>Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</option>
<option>ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</option>
<option>Ù…Ø¹Ø±Ø¶ ØªÙˆØ¹ÙˆÙŠ</option>
<option>Ø£Ø®Ø±Ù‰</option>
</select>

<label>Ø§Ø³Ù… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©</label>
<input type="text" id="eventName" placeholder="Ù…Ø«Ø§Ù„: ÙŠÙˆÙ… ØµØ­ÙŠ ØªÙˆØ¹ÙˆÙŠ">

<label>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø¯)</label>
<input type="text" id="target" placeholder="Ù…Ø«Ø§Ù„: Ø·Ù„Ø¨Ø© Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ â€“ 60 Ø·Ø§Ù„Ø¨">

<label>Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©</label>
<textarea id="summary" rows="4" placeholder="Ù†Ø¨Ø°Ø© Ù…Ø®ØªØµØ±Ø© Ø¹Ù† Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©"></textarea>

<label>Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø©</label>
<input type="file" id="image" accept="image/*">

<button onclick="saveEvent()">Ø­ÙØ¸</button>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBwxdmmszXWUszLo2y_cB-WXApxE1gmc3I",
  authDomain: "izki-5c802.firebaseapp.com",
  databaseURL: "https://izki-5c802-default-rtdb.firebaseio.com",
  projectId: "izki-5c802",
  storageBucket: "izki-5c802.firebasestorage.app",
  messagingSenderId: "614609990280",
  appId: "1:614609990280:web:7c2667d4b1257d4a73653d"
};

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);

/* Cloudinary */
const cloudName = "drjdge60j";
const uploadPreset = "e6tmihah";

window.saveEvent = async function() {

    const civil = localStorage.getItem("civil"); // ğŸ”¥ Ù†Ø¬ÙŠØ¨ Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    if(!civil){
        alert("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
        return;
    }

    const school = document.getElementById("school").value;
    const type = document.getElementById("type").value;
    const name = document.getElementById("eventName").value;
    const target = document.getElementById("target").value;
    const summary = document.getElementById("summary").value;
    const imageFile = document.getElementById("image").files[0];

    if(name === "" || target === "" || summary === ""){
        alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
        return;
    }

    let imageUrl = "";

    if(imageFile){
        const formData = new FormData();
        formData.append("file", imageFile);
        formData.append("upload_preset", uploadPreset);

        const response = await fetch(
            `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`,
            {
                method: "POST",
                body: formData
            }
        );

        const data = await response.json();
        imageUrl = data.secure_url;
    }

    // ğŸ”¥ Ù†Ø­ÙØ¸ Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ Ø®Ø§Øµ Ø¨ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…
    await push(ref(database, "events/" + civil), {
        school,
        type,
        eventName: name,
        targetGroup: target,
        summary,
        imageUrl,
        createdAt: new Date().toISOString()
    });

    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­ âœ…");
    location.reload();
};

</script>

</body>
</html>

